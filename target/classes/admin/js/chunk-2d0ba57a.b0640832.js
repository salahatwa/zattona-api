(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba57a"],{3799:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",{attrs:{gutter:12}},[a("a-col",{staticClass:"pb-3",attrs:{xl:10,lg:10,md:10,sm:24,xs:24}},[a("a-card",{attrs:{title:e.title,bodyStyle:{padding:"16px"}}},[a("a-form-model",{ref:"linkForm",attrs:{model:e.form.model,rules:e.form.rules,layout:"horizontal"}},[a("a-form-model-item",{attrs:{label:"website name：",prop:"name"}},[a("a-input",{model:{value:e.form.model.name,callback:function(t){e.$set(e.form.model,"name",t)},expression:"form.model.name"}})],1),a("a-form-model-item",{attrs:{label:"website  address：",help:"* Need to add http://",prop:"url"}},[a("a-input",{model:{value:e.form.model.url,callback:function(t){e.$set(e.form.model,"url",t)},expression:"form.model.url"}})],1),a("a-form-model-item",{attrs:{label:"Logo：",prop:"logo"}},[a("a-input",{model:{value:e.form.model.logo,callback:function(t){e.$set(e.form.model,"logo",t)},expression:"form.model.logo"}})],1),a("a-form-model-item",{attrs:{label:"Grouping：",prop:"team"}},[a("a-auto-complete",{attrs:{dataSource:e.computedTeams,allowClear:""},model:{value:e.form.model.team,callback:function(t){e.$set(e.form.model,"team",t)},expression:"form.model.team"}})],1),a("a-form-model-item",{attrs:{label:"Sort number：",prop:"priority"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.form.model.priority,callback:function(t){e.$set(e.form.model,"priority",t)},expression:"form.model.priority"}})],1),a("a-form-model-item",{attrs:{label:"description：",prop:"description"}},[a("a-input",{attrs:{type:"textarea",autoSize:{minRows:5}},model:{value:e.form.model.description,callback:function(t){e.$set(e.form.model,"description",t)},expression:"form.model.description"}})],1),a("a-form-model-item",[e.isUpdateMode?a("a-button-group",[a("ReactiveButton",{attrs:{type:"primary",loading:e.form.saving,errored:e.form.errored,text:"Update",loadedText:"Update completed",erroredText:"Update failed"},on:{click:e.handleCreateOrUpdateLink,callback:e.handleSavedCallback}}),e.isUpdateMode?a("a-button",{attrs:{type:"dashed"},on:{click:function(t){e.form.model={}}}},[e._v("Back to add")]):e._e()],1):a("ReactiveButton",{attrs:{type:"primary",loading:e.form.saving,errored:e.form.errored,text:"Save",loadedText:"Saved successfully",erroredText:"Save failed"},on:{click:e.handleCreateOrUpdateLink,callback:e.handleSavedCallback}})],1)],1)],1)],1),a("a-col",{staticClass:"pb-3",attrs:{xl:14,lg:14,md:14,sm:24,xs:24}},[a("a-card",{attrs:{title:"All friendship links",bodyStyle:{padding:"16px"}}},[e.isMobile()?a("a-list",{attrs:{itemLayout:"vertical",size:"large",dataSource:e.table.data,loading:e.table.loading},scopedSlots:e._u([{key:"renderItem",fn:function(t,o){return a("a-list-item",{key:o},[a("template",{slot:"actions"},[a("a-dropdown",{attrs:{placement:"topLeft",trigger:["click"]}},[a("span",[a("a-icon",{attrs:{type:"bars"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){e.form.model=t}}},[e._v("Edit")])]),a("a-menu-item",[a("a-popconfirm",{attrs:{title:"Are you sure you want to delete【"+t.name+"】link？",okText:"Ok",cancelText:"Cancel"},on:{confirm:function(a){return e.handleDeleteLink(t.id)}}},[a("a",{attrs:{href:"javascript:;"}},[e._v("Delete")])])],1)],1)],1)],1),a("template",{slot:"extra"},[a("span",[e._v(" "+e._s(t.team)+" ")])]),a("a-list-item-meta",[a("template",{slot:"description"},[e._v(" "+e._s(t.description)+" ")]),a("span",{staticStyle:{"max-width":"300px",display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.name)+" ")])],2),a("a",{attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.url))])],2)}}],null,!1,875191137)}):a("a-table",{attrs:{columns:e.table.columns,dataSource:e.table.data,loading:e.table.loading,rowKey:function(e){return e.id},scrollToFirstRowOnChange:!0},scopedSlots:e._u([{key:"url",fn:function(t){return[a("a",{attrs:{target:"_blank",href:t}},[e._v(e._s(t))])]}},{key:"name",fn:function(t){return a("ellipsis",{attrs:{length:15,tooltip:""}},[e._v(e._s(t))])}},{key:"action",fn:function(t,o){return a("span",{},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.form.model=o}}},[e._v("Edit")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"Are you sure you want to delete【"+o.name+"】link？",okText:"Ok",cancelText:"Cancel"},on:{confirm:function(t){return e.handleDeleteLink(o.id)}}},[a("a",{attrs:{href:"javascript:;"}},[e._v("Delete")])])],1)}}])})],1)],1)],1),a("div",{staticStyle:{position:"fixed",bottom:"30px",right:"30px"}},[a("a-button",{attrs:{type:"primary",shape:"circle",icon:"setting",size:"large"},on:{click:function(t){e.optionsModal.visible=!0}}})],1),a("a-modal",{attrs:{title:"Page setup",afterClose:function(){return e.optionsModal.visible=!1}},model:{value:e.optionsModal.visible,callback:function(t){e.$set(e.optionsModal,"visible",t)},expression:"optionsModal.visible"}},[a("template",{slot:"footer"},[a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:function(t){return e.handleSaveOptions()}}},[e._v("Save")])],1),a("a-form",{attrs:{layout:"vertical"}},[a("a-form-item",{attrs:{label:"page title：",help:"* Need to adapt the theme"}},[a("a-input",{model:{value:e.optionsModal.data.links_title,callback:function(t){e.$set(e.optionsModal.data,"links_title",t)},expression:"optionsModal.data.links_title"}})],1)],1)],2)],1)},n=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("2f62"),l=a("ac0d"),s=a("482b"),d=a("9efd"),c="/api/admin/links",m={listAll:function(){return Object(d["a"])({url:"".concat(c),method:"get"})},create:function(e){return Object(d["a"])({url:c,data:e,method:"post"})},get:function(e){return Object(d["a"])({url:"".concat(c,"/").concat(e),method:"get"})},getByParse:function(e){return Object(d["a"])({url:"".concat(c,"/parse"),params:{url:e},method:"get"})},update:function(e,t){return Object(d["a"])({url:"".concat(c,"/").concat(e),data:t,method:"put"})},delete:function(e){return Object(d["a"])({url:"".concat(c,"/").concat(e),method:"delete"})},listTeams:function(){return Object(d["a"])({url:"".concat(c,"/teams"),method:"get"})}},u=m;function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=[{title:"name",dataIndex:"name",ellipsis:!0,scopedSlots:{customRender:"name"}},{title:"URL",dataIndex:"url",ellipsis:!0,scopedSlots:{customRender:"url"}},{title:"Grouping",ellipsis:!0,dataIndex:"team"},{title:"Sort",dataIndex:"priority"},{title:"actions",key:"action",scopedSlots:{customRender:"action"}}],g={mixins:[l["a"],l["b"]],data:function(){return{table:{columns:h,data:[],loading:!1},form:{model:{},saving:!1,errored:!1,rules:{name:[{required:!0,message:"* Friendship link name can not be empty",trigger:["change"]},{max:255,message:"* The character length of Friendship link name cannot exceed 255",trigger:["change"]}],url:[{required:!0,message:"* Friendship link  address can not be empty",trigger:["change"]},{max:1023,message:"* The character length of the Friendship link address cannot exceed 1023",trigger:["change"]},{type:"url",message:"* Friendship link address format is wrong",trigger:["change"]}],logo:[{max:1023,message:"* The character length of the Friendship link Logo cannot exceed 1023",trigger:["change"]}],description:[{max:255,message:"* The character length of Friendship link description cannot exceed 255",trigger:["change"]}],team:[{max:255,message:"* Character length of Friendship linkGrouping 255",trigger:["change"]}]}},optionsModal:{visible:!1,data:[]},teams:[]}},computed:{title:function(){return this.isUpdateMode?"Modify Friendship link":"Add to Friendship link"},isUpdateMode:function(){return!!this.form.model.id},computedTeams:function(){return this.teams.filter((function(e){return""!==e}))}},created:function(){this.handleListLinks(),this.handleListLinkTeams(),this.handleListOptions()},methods:f(f({},Object(i["b"])(["refreshOptionsCache"])),{},{handleListLinks:function(){var e=this;this.table.loading=!0,u.listAll().then((function(t){e.table.data=t.data.data})).finally((function(){setTimeout((function(){e.table.loading=!1}),200)}))},handleListLinkTeams:function(){var e=this;u.listTeams().then((function(t){e.teams=t.data.data}))},handleListOptions:function(){var e=this;s["a"].listAll().then((function(t){e.optionsModal.data=t.data.data}))},handleDeleteLink:function(e){var t=this;u.delete(e).then((function(e){t.$message.success("delete success")})).finally((function(){t.handleListLinks(),t.handleListLinkTeams()}))},handleParseUrl:function(){var e=this;u.getByParse(this.form.model.url).then((function(t){e.form.model=t.data.data}))},handleCreateOrUpdateLink:function(){var e=this,t=this;t.$refs.linkForm.validate((function(a){a&&(t.form.saving=!0,t.isUpdateMode?u.update(t.form.model.id,t.form.model).catch((function(){e.form.errored=!0})).finally((function(){setTimeout((function(){t.form.saving=!1}),400)})):u.create(t.form.model).catch((function(){e.form.errored=!0})).finally((function(){setTimeout((function(){t.form.saving=!1}),400)})))}))},handleSavedCallback:function(){var e=this;e.form.errored?e.form.errored=!1:(e.form.model={},e.handleListLinks(),e.handleListLinkTeams())},handleSaveOptions:function(){var e=this;s["a"].save(this.optionsModal.data).then((function(t){e.$message.success("Saved successfully！"),e.optionsModal.visible=!1})).finally((function(){e.handleListOptions(),e.refreshOptionsCache()}))}})},b=g,v=a("2877"),k=Object(v["a"])(b,o,n,!1,null,null,null);t["default"]=k.exports}}]);