(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ba750a2"],{aa1e:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",{attrs:{gutter:12}},[a("a-col",{staticClass:"pb-3",attrs:{xl:10,lg:10,md:10,sm:24,xs:24}},[a("a-card",{attrs:{title:e.title,bodyStyle:{padding:"16px"}}},[a("a-form-model",{ref:"tagForm",attrs:{model:e.form.model,rules:e.form.rules,layout:"horizontal"}},[a("a-form-model-item",{attrs:{label:"Name：",help:"* The name displayed on the page",prop:"name"}},[a("a-input",{model:{value:e.form.model.name,callback:function(t){e.$set(e.form.model,"name",t)},expression:"form.model.name"}})],1),a("a-form-model-item",{attrs:{label:"Alias：",help:"* Generally it is the logo of a single tab page, preferably in English",prop:"slug"}},[a("a-input",{model:{value:e.form.model.slug,callback:function(t){e.$set(e.form.model,"slug",t)},expression:"form.model.slug"}})],1),a("a-form-model-item",{attrs:{label:"Cover picture：",help:"* Can be displayed on the label page, need theme support",prop:"thumbnail"}},[a("a-input",{model:{value:e.form.model.thumbnail,callback:function(t){e.$set(e.form.model,"thumbnail",t)},expression:"form.model.thumbnail"}},[a("a",{attrs:{slot:"addonAfter",href:"javascript:void(0);"},on:{click:function(t){e.thumbnailDrawer.visible=!0}},slot:"addonAfter"},[a("a-icon",{attrs:{type:"picture"}})],1)])],1),a("a-form-model-item",[e.isUpdateMode?a("a-button-group",[a("ReactiveButton",{attrs:{type:"primary",loading:e.form.saving,errored:e.form.errored,text:"Update",loadedText:"Update completed",erroredText:"Update failed"},on:{click:e.handleCreateOrUpdateTag,callback:e.handleSavedCallback}}),a("a-button",{attrs:{type:"dashed"},on:{click:function(t){e.form.model={}}}},[e._v("Back to add")])],1):a("ReactiveButton",{attrs:{type:"primary",loading:e.form.saving,errored:e.form.errored,text:"save",loadedText:"Saved successfully",erroredText:"Save failed"},on:{click:e.handleCreateOrUpdateTag,callback:e.handleSavedCallback}}),e.isUpdateMode?a("a-popconfirm",{attrs:{title:"Are you sure you want to delete【"+e.form.model.name+"】Tag？",okText:"Ok",cancelText:"Cancel"},on:{confirm:function(t){return e.handleDeleteTag(e.form.model.id)}}},[a("a-button",{staticClass:"float-right",attrs:{type:"danger"}},[e._v("delete")])],1):e._e()],1)],1)],1)],1),a("a-col",{staticClass:"pb-3",attrs:{xl:14,lg:14,md:14,sm:24,xs:24}},[a("a-card",{attrs:{title:"All tags",bodyStyle:{padding:"16px"}}},[a("a-spin",{attrs:{spinning:e.list.loading}},[0==e.list.data.length?a("a-empty"):e._l(e.list.data,(function(t){return a("a-tooltip",{key:t.id,attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[e._v(e._s(t.postCount)+" Article")])]),a("a-tag",{staticStyle:{"margin-bottom":"8px",cursor:"pointer"},attrs:{color:"blue"},on:{click:function(a){e.form.model=t}}},[e._v(e._s(t.name))])],2)}))],2)],1)],1)],1),a("AttachmentSelectDrawer",{attrs:{title:"Choose a cover image"},on:{listenToSelect:e.handleSelectThumbnail},model:{value:e.thumbnailDrawer.visible,callback:function(t){e.$set(e.thumbnailDrawer,"visible",t)},expression:"thumbnailDrawer.visible"}})],1)},l=[],n=a("d28d"),r={data:function(){return{list:{data:[],loading:!1},form:{model:{},saving:!1,errored:!1,rules:{name:[{required:!0,message:"* Tag name cannot be empty",trigger:["change"]},{max:255,message:"* The character length of the label name cannot exceed 255",trigger:["change"]}],slug:[{max:255,message:"* The character length of the tag alias cannot exceed 255",trigger:["change"]}],thumbnail:[{max:1023,message:"* The character length of the cover image link cannot exceed 1023",trigger:["change"]}]}},thumbnailDrawer:{visible:!1}}},computed:{title:function(){return this.isUpdateMode?"Edit Tag":"Add Tag"},isUpdateMode:function(){return!!this.form.model.id}},created:function(){this.handleListTags()},methods:{handleListTags:function(){var e=this;this.list.loading=!0,n["a"].listAll(!0).then((function(t){e.list.data=t.data.data})).finally((function(){setTimeout((function(){e.list.loading=!1}),200)}))},handleDeleteTag:function(e){var t=this;n["a"].delete(e).finally((function(){t.form.model={},t.handleListTags()}))},handleCreateOrUpdateTag:function(){var e=this,t=this;t.$refs.tagForm.validate((function(a){a&&(e.form.saving=!0,t.isUpdateMode?n["a"].update(t.form.model.id,t.form.model).catch((function(){e.form.errored=!0})).finally((function(){setTimeout((function(){t.form.saving=!1}),400)})):n["a"].create(t.form.model).catch((function(){e.form.errored=!0})).finally((function(){setTimeout((function(){t.form.saving=!1}),400)})))}))},handleSavedCallback:function(){var e=this;e.form.errored?e.form.errored=!1:(e.form.model={},e.handleListTags())},handleSelectThumbnail:function(e){this.$set(this.form.model,"thumbnail",encodeURI(e.path)),this.thumbnailDrawer.visible=!1}}},i=r,d=a("2877"),s=Object(d["a"])(i,o,l,!1,null,null,null);t["default"]=s.exports},d28d:function(e,t,a){"use strict";var o=a("9efd"),l="/api/admin/tags",n={listAll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(o["a"])({url:l,params:{more:e},method:"get"})},createWithName:function(e){return Object(o["a"])({url:l,data:{name:e},method:"post"})},create:function(e){return Object(o["a"])({url:l,data:e,method:"post"})},update:function(e,t){return Object(o["a"])({url:"".concat(l,"/").concat(e),data:t,method:"put"})},delete:function(e){return Object(o["a"])({url:"".concat(l,"/").concat(e),method:"delete"})}};t["a"]=n}}]);