(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b383e"],{2967:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-view",[n("a-row",[n("a-col",{attrs:{span:24}},[n("a-card",{attrs:{bordered:!1,bodyStyle:{padding:"16px"}}},[n("a-card",{staticClass:"environment-info",attrs:{bordered:!1,bodyStyle:{padding:"16px"}}},[n("template",{slot:"title"},[t._v(" Environmental info "),n("a",{attrs:{href:"javascript:void(0);"},on:{click:t.handleCopyEnvironments}},[n("a-icon",{attrs:{type:"copy"}})],1)]),n("a-popover",{attrs:{slot:"extra",placement:"left",title:t.isLatest?"Currently the latest version":"There is a new version"},slot:"extra"},[n("template",{slot:"content"},[n("p",[t._v(t._s(t.versionMessage))]),n("a-button",{attrs:{type:"dashed"},on:{click:t.handleShowVersionContent}},[t._v("see details")])],1),n("a-button",{attrs:{loading:t.checking,type:"dashed",shape:"circle",icon:t.isLatest?"check-circle":"exclamation-circle"}})],2),n("ul",{staticClass:"m-0 p-0 list-none"},[n("li",[t._v("version："+t._s(t.environments.version))]),n("li",[t._v("database："+t._s(t.environments.database))]),n("li",[t._v("operating mode："+t._s(t.environments.mode))]),n("li",[t._v("start up time："+t._s(t._f("moment")(t.environments.startTime)))])]),n("a",{staticClass:"mr-3",attrs:{href:"https://github.com/halo-dev",target:"_blank"}},[t._v("Open source organization "),n("a-icon",{attrs:{type:"link"}})],1),n("a",{staticClass:"mr-3",attrs:{href:"https://halo.run",target:"_blank"}},[t._v("User documentation "),n("a-icon",{attrs:{type:"link"}})],1),n("a",{staticClass:"mr-3",attrs:{href:"https://bbs.halo.run",target:"_blank"}},[t._v("Online community "),n("a-icon",{attrs:{type:"link"}})],1)],2),n("a-card",{attrs:{title:"Developer",bordered:!1,bodyStyle:{padding:"16px"},loading:t.contributorsLoading}},t._l(t.contributors,(function(t,e){return n("a",{key:e,attrs:{href:t.html_url,target:"_blank"}},[n("a-tooltip",{attrs:{placement:"top",title:t.login}},[n("a-avatar",{style:{marginRight:"10px",marginBottom:"10px"},attrs:{size:"large",src:t.avatar_url}})],1)],1)})),0)],1)],1),n("a-col",{attrs:{span:24}})],1),n("a-modal",{attrs:{title:t.versionContentModalTitle,visible:t.versionContentVisible,"ok-text":"see more",width:620},on:{cancel:function(e){t.versionContentVisible=!1},ok:t.handleOpenVersionUrl}},[n("div",{domProps:{innerHTML:t._s(t.versionContent)}})])],1)},o=[],r=(n("28a5"),n("a481"),n("96cf"),n("1da1")),i=(n("7f7f"),n("50fc")),s=n("bc3a"),c=n.n(s),l=n("0e54"),u=n.n(l),h=n("680a"),d={components:{PageView:h["c"]},data:function(){return{environments:{},contributors:[{login:"",id:0,node_id:"",avatar_url:"",gravatar_id:"",url:"",html_url:"",followers_url:"",following_url:"",gists_url:"",starred_url:"",subscriptions_url:"",organizations_url:"",repos_url:"",events_url:"",received_events_url:"",type:"",site_admin:!1,contributions:0}],contributorsLoading:!0,checking:!1,isLatest:!1,latestData:{},versionContentVisible:!1}},computed:{versionMessage:function(){return"current version：".concat(this.environments.version,"，").concat(this.isLatest?"It is already the latest version.":" new version：".concat(this.latestData.name,"，You can click on the button below to view the details."))},versionContent:function(){return this.latestData&&this.latestData.body?u()(this.latestData.body):"no content yet"},versionContentModalTitle:function(){return"".concat(this.latestData.name," Update content")}},created:function(){this.getEnvironments(),this.fetchContributors()},methods:{getEnvironments:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].environments().then((function(t){e.environments=t.data.data}));case 2:this.checkServerUpdate();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCopyEnvironments:function(){var t=this,e="version：".concat(this.environments.version,"\ndatabase：").concat(this.environments.database,"\nOperating mode：").concat(this.environments.mode,"\nUser Agent：").concat(navigator.userAgent);this.$copyText(e).then((function(e){t.$log.debug("copy",e),t.$message.success("copy success！")})).catch((function(e){t.$log.debug("copy.err",e),t.$message.error("copy failure！")}))},fetchContributors:function(){var t=this;t.contributorsLoading=!0,c.a.get("https://api.github.com/repos/halo-dev/halo/contributors").then((function(e){t.contributors=e.data})).catch((function(t){console.error("Fetch contributors error",t)})).finally((function(){setTimeout((function(){t.contributorsLoading=!1}),200)}))},checkServerUpdate:function(){var t=this,e=this.$createElement,n=this;n.checking=!0,c.a.get("https://api.github.com/repos/halo-dev/halo/releases/latest").then((function(a){var o=a.data;if(n.latestData=o,!o.draft&&!o.prerelease){var r=n.calculateIntValue(n.environments.version),i=n.calculateIntValue(o.name);if(r>=i)n.isLatest=!0;else{var s="new version remind",c="Detected Genhub new version："+o.name+"，Click on the button below to view the latest version。";n.$notification.open({message:s,description:c,icon:e("a-icon",{attrs:{type:"smile"},style:"color: #108ee9"}),btn:function(e){return e("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return t.handleShowVersionContent()}}},"Go see")}})}}})).catch((function(t){console.error("Check update fail",t)})).finally((function(){setTimeout((function(){t.checking=!1}),200)}))},handleShowVersionContent:function(){this.versionContentVisible=!0},handleOpenVersionUrl:function(){window.open(this.latestData.html_url,"_blank")},calculateIntValue:function(t){t=t.replace(/v/g,"");var e=t.split(".");if(null==e||3!==e.length)return-1;var n=parseInt(e[0]),a=parseInt(e[1]),o=parseInt(e[2]);return isNaN(n)||isNaN(a)||isNaN(o)?-1:1e6*n+1e3*a+o}}},p=d,v=n("2877"),m=Object(v["a"])(p,a,o,!1,null,null,null);e["default"]=m.exports}}]);